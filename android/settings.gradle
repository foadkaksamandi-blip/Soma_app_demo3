pluginManagement {
    // مسیر SDK از local.properties خوانده می‌شود (ستاپ اکشن Flutter همین را می‌سازد)
    def flutterSdkPath = {
        def props = new Properties()
        def propsFile = new File(settingsDir, "local.properties")
        if (propsFile.exists()) {
            propsFile.withReader("UTF-8") { r -> props.load(r) }
        }
        def path = props.getProperty("flutter.sdk")
        assert path != null : "flutter.sdk not set in local.properties"
        return path
    }()

    // این خط حیاتی است؛ سورس پلاگین Flutter را به Gradle معرفی می‌کند
    includeBuild("${flutterSdkPath}/packages/flutter_tools/gradle")

    repositories {
        gradlePluginPortal()
        google()
        mavenCentral()
        maven { url "https://storage.googleapis.com/download.flutter.io" }
    }
}

// نسخه پلاگین‌های اندروید و کاتلین در همین‌جا تعریف می‌شود
plugins {
    id "com.android.application" version "8.1.2" apply false
    id "org.jetbrains.kotlin.android" version "1.8.22" apply false
}

dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.PREFER_SETTINGS)
    repositories {
        google()
        mavenCentral()
        maven { url "https://storage.googleapis.com/download.flutter.io" }
    }
}

rootProject.name = "soma_app_demo3"
include(":app")
